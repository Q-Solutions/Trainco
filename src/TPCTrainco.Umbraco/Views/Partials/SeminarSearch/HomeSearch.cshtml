@using TPCTrainco.Umbraco.Extensions.Helpers
@using TPCTrainco.Umbraco.Extensions.Objects
@using TPCTrainco.Umbraco.Extensions.ViewModels
@inherits UmbracoTemplatePage

@{
    //List locations
    Locations locationsObj = new Locations();

    List<Location> locationList = locationsObj.GetAllLocations();

    //Get current GeoCoordinate
    string currentCityState = "";
    
    TPCTrainco.Umbraco.Extensions.Models.CoordinateDetails coordDetails = GeoCoordinates.GetCoordinateDetailsFromIp(System.Web.HttpContext.Current.Request.UserHostAddress);
    
    if (coordDetails != null)
    {
        currentCityState = coordDetails.City + ", " + coordDetails.StateCode;
    }
}

<div class="row">
    <div class="col-md-11 topic-circles">
        <h3>Select one or more topics and choose your location</h3>
        <ul>
            <li class="seminar-topic">
                <div class="overlay-contain">
                    <div class="overlay"></div>
                    <img src="/assets/images/selectall-icon.jpg" alt="Mechanical + Industrial" />
                </div>
                <p>Search All Seminars</p>
            </li>
            <li class="seminar-topic">
                <div class="overlay-contain">
                    <div class="overlay"></div>
                    <img src="/assets/images/electrical.jpg" alt="Mechanical + Industrial" />
                </div>
                <p>Electrical</p>
            </li>
            <li class="seminar-topic">
                <div class="overlay-contain">
                    <div class="overlay"></div>
                    <img src="/assets/images/plantmgmt-icon.jpg" alt="Mechanical + Industrial" />
                </div>
                <p>Plant Management</p>
            </li>
            <li class="seminar-topic">
                <div class="overlay-contain">
                    <div class="overlay"></div>
                    <img src="/assets/images/hvac-icon.jpg" alt="Mechanical + Industrial" />
                </div>
                <p>HVAC</p>
            </li>
            <li class="seminar-topic">
                <div class="overlay-contain">
                    <div class="overlay"></div>
                    <img src="/assets/images/mechanical-icon.jpg" alt="Mechanical + Industrial" />
                </div>
                <p>Mechanical &amp; Industrial</p>
            </li>

        </ul>

        <select id="main-search" multiple style="width:100%" data-placeholder="Choose a City or Enter a Zip Code" class="populate" data-location="@currentCityState">
            @foreach (Location location in locationList)
            {
                <option value="@location.CityState">@location.CityState</option>
            }
        </select>

        <a href="javascript:void(0);" id="search-btn" class="btn-reg btn-white" role="button">Search</a>


        <!-- end new -->

    </div>
</div>
