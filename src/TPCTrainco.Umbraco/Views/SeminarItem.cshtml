@using TPCTrainco.Umbraco.Extensions.Helpers
@inherits Umbraco.Web.Mvc.UmbracoTemplatePage
@{
    Layout = "Base.cshtml";

    IPublishedContent siteSettings = Nodes.Instance.SiteSettings;
    IPublishedContent onsitePromo = siteSettings.GetPropertyValue<IPublishedContent>("activePromo");
    var dynamicPromo = Umbraco.Content(onsitePromo.Id);
    var seminarContainer = CurrentPage.AncestorOrSelf(2);
}

<div class="container-fluid headline-section seminar-detail">
    <div class="row">
        <div class="jumbotron">
            @if (!String.IsNullOrEmpty(CurrentPage.pageTitle))
            {
                <h1>@CurrentPage.pageTitle</h1>
            }
            else
            {
                <h1>@CurrentPage.name</h1>
            }
        </div>
        @if (CurrentPage.onSiteQuote)
        {
            <div class="button-wrapper col-xs-12 col-md-8 col-md-offset-2">
                <div class="col-xs-8 col-xs-offset-2 col-md-4 col-md-offset-2">
                    <a href="#" class="btn-reg btn-first" role="button">Register Now</a>
                </div>
                <div class="col-xs-8 col-xs-offset-2 col-md-4 second-btn">
                    <a href="@dynamicPromo.promoLink.Url" class="btn-reg btn-white" role="button">Get an On-Site Quote</a>
                </div>
            </div>
        }
        else
        {
            <div class="button-wrapper col-xs-12">
                <div class="col-xs-12">
                    <a href="#" class="btn-reg btn-first" role="button">Register Now</a>
                </div>
            </div>
        }
    </div>
</div>

@Html.Partial("Cart/MiniCart")

<div class="container-fluid gradient-bg main-content">
    <div class="row">
        <div class="col-md-8 col-md-offset-2 text-wrap">

            <div class="share-btn-wrap">
                <a href="javascript:void(0);" class="btn-reg btn-blue-solid btn-share" data-toggle="popover" data-placement="auto bottom" data-content='<ul class="social">
                            <li><a href="#" class="regular-link"><svg
                                 width="512px" height="512px" viewBox="0 0 512 512" enable-background="new 0 0 512 512" xml:space="preserve">

                            <path id="facebook-icon" d="M204.067,184.692h-43.144v70.426h43.144V462h82.965V254.238h57.882l6.162-69.546h-64.044

                                c0,0,0-25.97,0-39.615c0-16.398,3.302-22.89,19.147-22.89c12.766,0,44.896,0,44.896,0V50c0,0-47.326,0-57.441,0

                                c-61.734,0-89.567,27.179-89.567,79.231C204.067,174.566,204.067,184.692,204.067,184.692z"/>
                            </svg></a></li>

                            <li><a href="#" class="regular-link"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"width="512px" height="512px" viewBox="0 0 512 512" enable-background="new 0 0 512 512" xml:space="preserve">

                                <path id="twitter-icon" d="M462,128.223c-15.158,6.724-31.449,11.269-48.547,13.31c17.449-10.461,30.854-27.025,37.164-46.764

                                c-16.333,9.687-34.422,16.721-53.676,20.511c-15.418-16.428-37.386-26.691-61.698-26.691c-54.56,0-94.668,50.916-82.337,103.787

                                c-70.25-3.524-132.534-37.177-174.223-88.314c-22.142,37.983-11.485,87.691,26.158,112.85c-13.854-0.438-26.891-4.241-38.285-10.574

                                c-0.917,39.162,27.146,75.781,67.795,83.949c-11.896,3.237-24.926,3.978-38.17,1.447c10.754,33.58,41.972,58.018,78.96,58.699

                                C139.604,378.282,94.846,390.721,50,385.436c37.406,23.982,81.837,37.977,129.571,37.977c156.932,0,245.595-132.551,240.251-251.435

                                C436.339,160.061,450.668,145.174,462,128.223z"/>

                            </svg></a></li>

                            <li><a href="#" class="regular-link"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"

                                 width="512px" height="512px" viewBox="0 0 512 512" enable-background="new 0 0 512 512" xml:space="preserve">

                            <path id="linkedin-icon" d="M150.65,100.682c0,27.992-22.508,50.683-50.273,50.683c-27.765,0-50.273-22.691-50.273-50.683

                                C50.104,72.691,72.612,50,100.377,50C128.143,50,150.65,72.691,150.65,100.682z M143.294,187.333H58.277V462h85.017V187.333z

                                 M279.195,187.333h-81.541V462h81.541c0,0,0-101.877,0-144.181c0-38.624,17.779-61.615,51.807-61.615

                                c31.268,0,46.289,22.071,46.289,61.615c0,39.545,0,144.181,0,144.181h84.605c0,0,0-100.344,0-173.915

                                s-41.689-109.131-99.934-109.131s-82.768,45.369-82.768,45.369V187.333z"/>

                            </svg></a></li></ul>'>Share</a>
            </div>
            <!-- end -->
            @if (CurrentPage.HasValue("seminarOverview"))
            {
                <div class="page-content">
                    <h2>Seminar Overview</h2>
                    @CurrentPage.seminarOverview
                </div>
            }

            @if (CurrentPage.HasValue("day1Copy"))
            {
                <div class="page-content">
                    <h2>Discussion Topics</h2>
                    <div class="day-descriptions-wrap">
                        <div class="single-day-description">
                            @if (!String.IsNullOrEmpty(CurrentPage.day1Header))
                            {
                                <h3>Day One - @CurrentPage.day1Header</h3>
                            }
                            else
                            {
                                <h3>Day One</h3>
                            }
                            @CurrentPage.day1Copy
                        </div>
                        @if (CurrentPage.HasValue("day2Copy"))
                        {
                            <div class="single-day-description">
                                @if (!String.IsNullOrEmpty(CurrentPage.day2Header))
                                {
                                    <h3>Day Two - @CurrentPage.day2Header</h3>
                                }
                                else
                                {
                                    <h3>Day Two</h3>
                                }
                                @CurrentPage.day2Copy
                            </div>
                        }
                        @if (CurrentPage.HasValue("day3Copy"))
                        {
                            <div class="single-day-description">
                                @if (!String.IsNullOrEmpty(CurrentPage.day3Header))
                                {
                                    <h3>Day Three - @CurrentPage.day3Header</h3>
                                }
                                else
                                {
                                    <h3>Day Three</h3>
                                }
                                @CurrentPage.day3Copy
                            </div>
                        }
                        @if (CurrentPage.HasValue("day4Copy"))
                        {
                            <div class="single-day-description">
                                @if (!String.IsNullOrEmpty(CurrentPage.day4Header))
                                {
                                    <h3>Day Four - @CurrentPage.day4Header</h3>
                                }
                                else
                                {
                                    <h3>Day Four</h3>
                                }
                                @CurrentPage.day4Copy
                            </div>
                        }
                    </div>
                </div>
            }
            @if (CurrentPage.HasValue("certificationCopy"))
            {
                <div class="page-content">
                    <h2>@CurrentPage.certificationHeader</h2>
                    @CurrentPage.certificationCopy
                </div>
            }
            @if (CurrentPage.includeCeu)
            {
                <div class="page-content">
                    <h2>@seminarContainer.ceuHeader</h2>
                    @seminarContainer.ceuCopy
                </div>
            }
            @if (CurrentPage.includeAtmt)
            {
                <div class="page-content">
                    <h2>@seminarContainer.atmtHeader</h2>
                    @seminarContainer.atmtCopy
                </div>
            }
            @if (CurrentPage.blockPurchase)
            {
                <div class="page-content">
                    <h2>@seminarContainer.blockHeader</h2>
                    @seminarContainer.blockCopy
                </div>
            }
        </div>
    </div>
</div>

@Html.Partial("Cart/MiniCart");

<div class="container-fluid results-container detail-page-app">
    <div id="cart"></div>
    <div class="container">
        <div class="row">
            <div class="empty-message">
                <p>Select a topic, city, and date range to find classes.</p>
            </div>
            <div class="spinner class-loader">
                <div class="bounce1"></div>
                <div class="bounce2"></div>
                <div class="bounce3"></div>
            </div>
            <ul class="results"></ul>
        </div>
    </div>
</div>

<script type="text/template" id="classTemplate">
    <div class="result-description">
        <div class="row">
            <div class="col-xs-12 col-md-2">
                <img src="/assets/images/hvac-icon.jpg" alt="All Seminars" />
            </div>
            <div class="col-xs-12 col-md-8 text-desc">
                <h2><a href="<%= detailsUrl %>"><%= title %></a></h2>
                <p><%= subTitle %></p>
                <a href="javascript:void(0);" class="view-opts" data-seminar="<%= seminarId %>"><span class="plus">+</span>View Upcoming Seminars</a>
            </div>
            <li class="spinner location-loader">
                <div class="bounce1"></div>
                <div class="bounce2"></div>
                <div class="bounce3"></div>
            </li>
        </div>
    </div>
    <ul class="schedule-item-wrap row"></ul>
</script>

<script type="text/template" id="locationTemplate">
    <div class="location col-xs-12 col-sm-10 col-sm-offset-1">
        <p><%= cityState %><img src="/assets/images/icon-question.png" class="location-icon" /><span class="location-msg">We will email you the exact location.</span></p>
    </div>
    <div class="schedule-items-wrap"></div>
</script>


<script type="text/template" id="scheduleTemplate">
    <ul class="schedule col-xs-12">
        <li class="date col-xs-12 col-sm-3 col-sm-offset-1 col-md-3"><%= date%></li>
        <li class="sub-total col-xs-12 col-sm-2 col-md-2">$<span class="sub-total"></span><%= price %></li>
        <li class="attendees col-xs-12 col-sm-3 col-md-3"><span class="attendees-label">Attendees:</span><input type="text" name="quantity" class="class-qty"></li>
        <li class="col-xs-12 col-sm-3 col-md-3"><a href="javascript:void(0);" class="btn-reg btn-blue-hollow add-to-cart" data-id="<%= id %>">Add to Cart</a></li>
    </ul>
</script>

<!-- End Backbone app-->

@Html.Partial("SeminarSearch/SeminarDetailsSearch", Model.Content);

<!-- the red section -->
@if (CurrentPage.onSiteQuote)
{
    <div class="container-fluid onsite-section">
        <div class="left-skew">
            <div class="skewed-side">
                <div class="inner">
                    <h2 class="callout-headline">@dynamicPromo.promoHeadline</h2>
                    @dynamicPromo.promoText
                    <a href="@dynamicPromo.promoLink.Url" class="btn-reg btn-white" role="button">@dynamicPromo.promoButtonText</a>
                </div>
            </div>
        </div>
        @if (dynamicPromo.HasValue("promoImage"))
        {
            <div class="right-img">
                <img src="@dynamicPromo.promoImage.Url" alt="See our on-site programs">
            </div>
        }
    </div>
}