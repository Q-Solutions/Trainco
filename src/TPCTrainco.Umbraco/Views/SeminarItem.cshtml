@using TPCTrainco.Umbraco.Extensions.Helpers
@inherits Umbraco.Web.Mvc.UmbracoTemplatePage
@{
    Layout = "Base.cshtml";

    IPublishedContent currentPage = Model.Content;
    IPublishedContent siteSettings = Nodes.Instance.SiteSettings;
    IPublishedContent onsitePromo = siteSettings.GetPropertyValue<IPublishedContent>("activePromo");
    var dynamicPromo = Umbraco.Content(onsitePromo.Id);
    var seminarContainer = CurrentPage.AncestorOrSelf(2);
}

<div class="container-fluid headline-section seminar-detail">
    <div class="row">
        <div class="jumbotron">
            @if (!String.IsNullOrEmpty(CurrentPage.pageTitle))
            {
                <h1>@CurrentPage.pageTitle</h1>
            }
            else
            {
                <h1>@CurrentPage.name</h1>
            }
        </div>
        @if (CurrentPage.onSiteQuote)
        {
            <div class="button-wrapper col-xs-12 col-md-8 col-md-offset-2">
                <div class="col-xs-8 col-xs-offset-2 col-md-4 col-md-offset-2">
                    <a href="#" class="btn-reg btn-first" role="button">Register Now</a>
                </div>
                <div class="col-xs-8 col-xs-offset-2 col-md-4 second-btn">
                    <a href="@dynamicPromo.promoLink.Url" class="btn-reg btn-white" role="button">Get an On-Site Quote</a>
                </div>
            </div>
        }
        else
        {
            <div class="button-wrapper col-xs-12">
                <div class="col-xs-12">
                    <a href="#" class="btn-reg btn-first" role="button">Register Now</a>
                </div>
            </div>
        }
    </div>
</div>

@Html.Partial("Cart/MiniCart")

<div class="container-fluid gradient-bg main-content">
    <div class="row">
        <div class="col-md-8 col-md-offset-2 text-wrap">

            @Html.Partial("Share/ShareModule", currentPage)

            @if (CurrentPage.HasValue("seminarOverview"))
            {
                <div class="page-content">
                    <h2>Seminar Overview</h2>
                    @CurrentPage.seminarOverview
                </div>
            }

            @if (CurrentPage.HasValue("day1Copy"))
            {
                <div class="page-content">
                    <h2>Discussion Topics</h2>
                    <div class="day-descriptions-wrap">
                        <div class="single-day-description">
                            @if (!String.IsNullOrEmpty(CurrentPage.day1Header))
                            {
                                <h3>Day One - @CurrentPage.day1Header</h3>
                            }
                            else
                            {
                                <h3>Day One</h3>
                            }
                            @CurrentPage.day1Copy
                        </div>
                        @if (CurrentPage.HasValue("day2Copy"))
                        {
                            <div class="single-day-description">
                                @if (!String.IsNullOrEmpty(CurrentPage.day2Header))
                                {
                                    <h3>Day Two - @CurrentPage.day2Header</h3>
                                }
                                else
                                {
                                    <h3>Day Two</h3>
                                }
                                @CurrentPage.day2Copy
                            </div>
                        }
                        @if (CurrentPage.HasValue("day3Copy"))
                        {
                            <div class="single-day-description">
                                @if (!String.IsNullOrEmpty(CurrentPage.day3Header))
                                {
                                    <h3>Day Three - @CurrentPage.day3Header</h3>
                                }
                                else
                                {
                                    <h3>Day Three</h3>
                                }
                                @CurrentPage.day3Copy
                            </div>
                        }
                        @if (CurrentPage.HasValue("day4Copy"))
                        {
                            <div class="single-day-description">
                                @if (!String.IsNullOrEmpty(CurrentPage.day4Header))
                                {
                                    <h3>Day Four - @CurrentPage.day4Header</h3>
                                }
                                else
                                {
                                    <h3>Day Four</h3>
                                }
                                @CurrentPage.day4Copy
                            </div>
                        }
                    </div>
                </div>
            }
            @if (CurrentPage.HasValue("certificationCopy"))
            {
                <div class="page-content">
                    <h2>@CurrentPage.certificationHeader</h2>
                    @CurrentPage.certificationCopy
                </div>
            }
            @if (CurrentPage.includeCeu)
            {
                <div class="page-content">
                    <h2>@seminarContainer.ceuHeader</h2>
                    @seminarContainer.ceuCopy
                </div>
            }
            @if (CurrentPage.includeAtmt)
            {
                <div class="page-content">
                    <h2>@seminarContainer.atmtHeader</h2>
                    @seminarContainer.atmtCopy
                </div>
            }
            @if (CurrentPage.blockPurchase)
            {
                <div class="page-content">
                    <h2>@seminarContainer.blockHeader</h2>
                    @seminarContainer.blockCopy
                </div>
            }
        </div>
    </div>
</div>

@Html.Partial("Cart/MiniCart");

<div class="container-fluid results-container detail-page-app">
    <div id="cart"></div>
    <div class="container">
        <div class="row">
            <div class="empty-message">
                <p>Select a topic, city, and date range to find classes.</p>
            </div>
            <div class="spinner class-loader">
                <div class="bounce1"></div>
                <div class="bounce2"></div>
                <div class="bounce3"></div>
            </div>
            <ul class="results"></ul>
        </div>
    </div>
</div>

<script type="text/template" id="classTemplate">
    <div class="result-description">
        <div class="row">
            <div class="col-xs-12 col-md-2">
                <img src="/assets/images/hvac-icon.jpg" alt="All Seminars" />
            </div>
            <div class="col-xs-12 col-md-8 text-desc">
                <h2><a href="<%= detailsUrl %>"><%= title %></a></h2>
                <p><%= subTitle %></p>
                <a href="javascript:void(0);" class="view-opts" data-seminar="<%= seminarId %>"><span class="plus">+</span>View Upcoming Seminars</a>
            </div>
            <li class="spinner location-loader">
                <div class="bounce1"></div>
                <div class="bounce2"></div>
                <div class="bounce3"></div>
            </li>
        </div>
    </div>
    <ul class="schedule-item-wrap row"></ul>
</script>

<script type="text/template" id="locationTemplate">
    <div class="location col-xs-12 col-sm-10 col-sm-offset-1">
        <p><%= cityState %><img src="/assets/images/icon-question.png" class="location-icon" /><span class="location-msg">We will email you the exact location.</span></p>
    </div>
    <div class="schedule-items-wrap"></div>
</script>


<script type="text/template" id="scheduleTemplate">
    <ul class="schedule col-xs-12">
        <li class="date col-xs-12 col-sm-3 col-sm-offset-1 col-md-3"><%= date%></li>
        <li class="sub-total col-xs-12 col-sm-2 col-md-2">$<span class="sub-total"></span><%= price %></li>
        <li class="attendees col-xs-12 col-sm-3 col-md-3"><span class="attendees-label">Attendees:</span><input type="text" name="quantity" class="class-qty"></li>
        <li class="col-xs-12 col-sm-3 col-md-3"><a href="javascript:void(0);" class="btn-reg btn-blue-hollow add-to-cart" data-id="<%= id %>">Add to Cart</a></li>
    </ul>
</script>

<!-- End Backbone app-->

@Html.Partial("SeminarSearch/SeminarDetailsSearch", Model.Content);

<!-- the red section -->
@if (CurrentPage.onSiteQuote)
{
    <div class="container-fluid onsite-section">
        <div class="left-skew">
            <div class="skewed-side">
                <div class="inner">
                    <h2 class="callout-headline">@dynamicPromo.promoHeadline</h2>
                    @dynamicPromo.promoText
                    <a href="@dynamicPromo.promoLink.Url" class="btn-reg btn-white" role="button">@dynamicPromo.promoButtonText</a>
                </div>
            </div>
        </div>
        @if (dynamicPromo.HasValue("promoImage"))
        {
            <div class="right-img">
                <img src="@dynamicPromo.promoImage.Url" alt="See our on-site programs">
            </div>
        }
    </div>
}