@using TPCTrainco.Umbraco.Extensions.Objects
@using TPCTrainco.Umbraco.Extensions
@inherits Umbraco.Web.Mvc.UmbracoTemplatePage
@{
    Layout = "Base.cshtml";

    List<temp_Reg> cartList = null;
    string cartGuid = null;

    if (Request.QueryString["cart"] != null && Request.QueryString.Get("cart").Length > 0)
    {
        cartGuid = Request.QueryString.Get("cart").ToLower();

        Carts cartsObj = new Carts();

        cartList = cartsObj.GetCart(cartGuid);

        if (cartList == null)
        {
            Response.Redirect("/search-seminars/");
        }

        int totalItems = cartList.Count;
        decimal cartTotal = cartList.Sum(p => p.sem_FeeAmt) ?? 0;

    }


}

<div class="container-fluid register-top">
    <div class="cart-visible">
        <a class="cart-tab" href="javascript:void(0);">
            <img src="/assets/images/icon-cart-tab.png" />
        </a>
        <div class="container">
            <ul class="cart-total col-xs-12 col-md-4">
                <li class="items">6 a</li>
                <li>Total:<span class="total">$4999</span></li>
            </ul>
        </div>
    </div>
    <div class="container">
        <div class="jumbotron">
            @if (!String.IsNullOrEmpty(CurrentPage.pageHeadline))
            {
                <h1>@CurrentPage.pageHeadline</h1>
            }
            else
            {
                <h1>@CurrentPage.name</h1>
            }
            <ul class="indicator">
                <li class="step step1"></li>
                <li class="line line1"></li>
                <li class="step step2"></li>
                <li class="line line2"></li>
                <li class="step step3"></li>
            </ul>
        </div>
    </div>
</div>

<div class="container-fluid form-container gradient-bg">

    @foreach (temp_Reg seminar in cartList)
    {
        string courseFormatStr = null;

        using (var db = new ATI_DevelopmentEntities1())
        {
            ScheduleCourseInstructor scheduleCourseInstructor = db.ScheduleCourseInstructors.Where(p => p.ScheduleID == seminar.sem_SID).FirstOrDefault();

            if (scheduleCourseInstructor != null)
            {
                COURS course = db.COURSES.Where(p => p.CourseID == scheduleCourseInstructor.CourseID).FirstOrDefault();

                if (course != null)
                {
                    CourseFormat courseFormat = db.CourseFormats.Where(p => p.CourseFormatID == course.CourseFormatID).FirstOrDefault();

                    if (courseFormat != null)
                    {
                        courseFormatStr = courseFormat.CourseFormatName;
                    }
                }
            }
        }


        string[] locationDatesArray = seminar.sem_Place.Split(new string[] { " - " }, StringSplitOptions.None);

        string location = locationDatesArray[0];
        string seminarDates = locationDatesArray[1];

        <div class="col-md-12 form-item-wrapper">
            <div class="container">
                <!-- top section for one workshop -->
                <ul class="top-info">
                    <li><h2>Attendees for @(seminar.sem_Title + " - " + courseFormatStr)</h2><p></p></li>
                    <li><p>@(location)</p></li>
                    <li class="date"><p>@(seminarDates)</p></li>
                </ul>
                <!-- end -->

                <div class="attendee-info-form-wrap">
                    @for (int attendeeInc = 1; attendeeInc <= seminar.sem_Qty; attendeeInc++)
                    {
                        <p class="class-option">Attendee #@(attendeeInc)</p>
                        <form>
                            <div class="form-group col-xs-12 col-sm-6 col-md-3">
                                <input type="text" class="form-control" placeholder="First Name">
                            </div>

                            <div class="form-group col-xs-12 col-sm-6 col-md-3">
                                <input type="text" class="form-control" placeholder="Last Name">
                            </div>

                            <div class="form-group col-xs-12 col-sm-6 col-md-3">
                                <input type="text" class="form-control" placeholder="Title">
                            </div>

                            <div class="form-group col-xs-12 col-sm-6 col-md-3">
                                <input type="email" class="form-control" placeholder="Email">
                            </div>
                        </form>
                    }
                </div>

            </div>

        </div>
    }

    <a class="btn-reg btn-blue-solid next-btn" href="@CurrentPage.RegisterInfo.First().Url">Next</a>
</div>


